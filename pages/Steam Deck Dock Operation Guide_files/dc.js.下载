(()=>{var t={757:(t,e,n)=>{t.exports=n(666)},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new T(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return q()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=k(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=d(t,e,n);if("normal"===s.type){if(r=n.done?v:h,s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",v="completed",f={};function m(){}function g(){}function w(){}var y={};s(y,i,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(O([])));b&&b!==n&&r.call(b,i)&&(y=b);var S=w.prototype=m.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,i,a,c){var s=d(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=d(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function O(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:q}}function q(){return{value:e,done:!0}}return g.prototype=w,s(S,"constructor",w),s(w,"constructor",g),g.displayName=s(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},x(E.prototype),s(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(S),s(S,c,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function e(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function c(e){t(a,o,i,c,s,"next",e)}function s(e){t(a,o,i,c,s,"throw",e)}c(void 0)}))}}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=n(757),s=n.n(c);const u="amEventSid",d="amUtmSource",l="amUtmMedium",h="amUtmContent",p="amUtmCampaign",v="amUtmSCP",f="_ama",m="_am_id",g="/";function w(t){let e=[];try{e=document.cookie.split(";")}catch(t){}const n=`${t}=`;for(let t of e)if(t=t.trim(),t.substring(0,n.length)===n)return t.substring(n.length);return""}function y(t,e,n){let r=`${t}=${e}`;void 0!==(null==n?void 0:n.path)&&(r+=`;path=${n.path}`),void 0!==(null==n?void 0:n.domain)&&(r+=`;domain=${n.domain}`),void 0!==(null==n?void 0:n.maxAge)&&(r+=`;max-age=${n.maxAge}`),(null==n?void 0:n.secure)&&(r+=";secure"),void 0!==(null==n?void 0:n.sameSite)&&(r+=`;samesite=${n.sameSite}`);try{document.cookie=r}catch(t){}}function _(t,e){(function(t){let e=[];try{e=document.cookie.split(";")}catch(t){}const n=`${t}=`;for(let t of e)if(t=t.trim(),t.substring(0,n.length)===n)return!0;return!1})(t)&&y(t,"deleted",Object.assign({},e,{expires:new Date("1970-01-01")}))}var b;function S(){const t=URL.createObjectURL(new Blob),e=t.toString();URL.revokeObjectURL(t);const n=e.split(/[:/]/g).pop();return n?n.toLowerCase():function(){let t=(new Date).getTime(),e="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){let r=16*Math.random();return t>0?(r=(t+r)%16|0,t=Math.floor(t/16)):(r=(e+r)%16|0,e=Math.floor(e/16)),("x"===n?r:3&r|8).toString(16)}))}()}function x(t,e){return Math.floor(Math.random()*(e-t)+t)}!function(t){t.click="click",t.impr="impr",t.page_enter="page_enter",t.page_leave="page_leave",t.modal_view="modal_view",t.modal_close="modal_close",t.add_to_cart="add_to_cart",t.cart_updated="cart_updated",t.remove_from_cart="remove_from_cart",t.view_item="view_item",t.click_item="click_item",t.checkout="checkout",t.purchase="purchase",t.subscribe="subscribe",t.get_coupon="get_coupon",t.search="search"}(b||(b={}));var E,k;function L(t){let e=sessionStorage.getItem(t);return e||(e=S(),sessionStorage.setItem(t,e),e)}function C(){return t=this,e=void 0,r=function*(){return new Promise((t=>{"complete"===document.readyState?t(!0):document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&t(!0)}))}))},new((n=void 0)||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}));var t,e,n,r}function T(t){for(const e in t)void 0!==t[e]&&null!==t[e]||delete t[e];return t}function O(t){return!t||isNaN(parseInt(t,10))?0:parseInt(t,10)}function q(t,e){localStorage.setItem(t,JSON.stringify(e))}function I(t){const e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return null}return null}function j(t){localStorage.removeItem(t)}function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}!function(t){t.Home="P00001",t.Collections="P00002",t.SearchResults="P00003",t.Product="P00004",t.Cart="P00005",t.ThankYou="P00006"}(E||(E={})),function(t){t.cart="/cart.js",t.cartCheckout="/cart"}(k||(k={}));const R=[{page_type:"home",regexp:/^\/$/,page_sn:E.Home},{page_type:"collections",regexp:/^\/collections\/((?!products\/).)*$/,page_sn:E.Collections},{page_type:"searchresults",regexp:/^\/search$/,page_sn:E.SearchResults},{page_type:"product",regexp:/^\/products\/[^/]+$/,page_sn:E.Product},{page_type:"",regexp:/^\/cart$/,page_sn:E.Cart},{page_type:"",regexp:/^\/([^/]+\/)?checkouts(\/c)?\/[^/]+\/thank_you/,page_sn:E.ThankYou}];function D(){var t,e,n;const r=window.location.pathname,o=null===(n=null===(e=null===(t=window.ShopifyAnalytics)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.page)||void 0===n?void 0:n.pageType;return R.find((t=>t.regexp.test(r)||o===t.page_type))||{page_type:o,regexp:/.+/,page_sn:""}}function A(){var t,e,n;const r=(null===(n=null===(e=null===(t=window.ShopifyAnalytics)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.page)||void 0===n?void 0:n.customerId)||"";return{userId:r,isLogged:Boolean(r)}}var K;function M(){return"Shopify"in window}!function(t){t.woo="woocommerce",t.shopify="shopify"}(K||(K={}));const $=function(){return"woocommerce_params"in window},Q=()=>{var t,e;const{hostname:n}=window.location;let r="";return M()&&(r=(null===(e=null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.shop)||void 0===e?void 0:e.split(".")[0])||n.includes("myshopify.com")&&n.split(".")[0]),$(),r};function N(){var t,e,n,r,o;return e=this,n=void 0,o=function*(){return M()?D().page_sn===E.ThankYou||("function"==typeof(null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.loadFeatures)?new Promise(((t,e)=>{window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],(function(n){n?e(n):t(U())}))})):U()):!(!document.querySelector('meta[name="as-btp"][content="true"]')&&"object"!=typeof window.AM_CONSENT_SDK)||new Promise(((t,e)=>{fetch(function(t){if(t||(t="production"),!t)throw new Error("process.env.APP_ENV not found");const e={testing:"bff-api.aftership.io",staging:"bff-api.aftership.com",production:"bff-api.aftership.com"};return`https://${e[t||"testing"]||e.testing}/business/compliance/v1/requirement`}(),{}).then((t=>t.json())).then((e=>{const n=e.data.ccpa,r=e.data.gdpr,o=e.data.uk_gdpr;t(!(n||r||o))})).catch((t=>{e(t)}))}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,c)}s((o=o.apply(e,n||[])).next())}))}function U(){var t,e,n,r;let o=!1;"function"==typeof(null===(e=null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.customerPrivacy)||void 0===e?void 0:e.userDataCanBeSold)&&(o=window.Shopify.customerPrivacy.userDataCanBeSold());let i=!1;return"function"==typeof(null===(r=null===(n=null===window||void 0===window?void 0:window.Shopify)||void 0===n?void 0:n.customerPrivacy)||void 0===r?void 0:r.userCanBeTracked)&&(i=window.Shopify.customerPrivacy.userCanBeTracked()),i&&o}function B(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var H,X=M()?K.shopify:$()?K.woo:"",G=Q(),z={};function Y(t){var e,n,r;if(null!==(e=window.amStorefrontKit)&&void 0!==e&&e.dataCollect){var o=window.amStorefrontKit.dataCollect.eventMap,i=o.get(t);i||(i={data:[],sentDataLen:-1,sentAppLen:-1},o.set(t,i)),i.eventId||(i.eventId=S());var a=Object.keys(window.amStorefrontKit.dataCollect.state).length;if(i.sentDataLen!==i.data.length||i.sentAppLen!==a){i.sentDataLen=i.data.length,i.sentAppLen=a;var c=function(t){var e,n,r,o=D(),i=[],a={},c={},s=B(t.data);try{for(s.s();!(r=s.n()).done;){var f=r.value;if(f.ecommerce&&!c.ecommerce&&(c.ecommerce=f.ecommerce),f.params&&!c.params&&(c.params=f.params),f.page&&!c.page&&(c.page=f.page),f.user_id&&!c.user_id&&(c.user_id=f.user_id),f.promotion){var g=Object.assign({},f.promotion);i.push(g),g.app_name&&(a[g.app_name]=!0)}}}catch(t){s.e(t)}finally{s.f()}if(z.promotions){var y,_=B(z.promotions);try{for(_.s();!(y=_.n()).done;){var b=y.value;b.app_name&&!0!==a[b.app_name]&&i.push(b)}}catch(t){_.e(t)}finally{_.f()}}i.length>0&&(c.promotions=i);var S,x={kit:"3.3",event_time:(S=(new Date).getTime(),"number"==typeof S?S:0),platform:"WEB",user_id:A().userId,session_id:L(u),log_id:t.eventId||"",environment:"production",product_code:"automizely",collector:"GTAG",app_connections:{app_platform:X||z.app_platform||"",app_key:G||z.app_key||"",app_names:Object.keys(window.amStorefrontKit.dataCollect.state),__organization_id:z.__organization_id||""},page:Object.assign(T({page_referrer:document.referrer,page_location:window.location.href,page_id:window.amStorefrontKit.dataCollect.pageId||"",page_type:null!==(e=null==o?void 0:o.page_type)&&void 0!==e?e:"",page_sn:null!==(n=null==o?void 0:o.page_sn)&&void 0!==n?n:"",utm_source:sessionStorage.getItem(d),utm_medium:sessionStorage.getItem(l),utm_content:sessionStorage.getItem(h),utm_campaign:sessionStorage.getItem(p),_sc_p:sessionStorage.getItem(v)}),c.page)},E=w(m);return E&&(x._am_id=E),delete c.page,Object.assign(x,c)}(i);null===(n=window.amStorefrontKit.dataLayer)||void 0===n||n.push([t.type,c]);var s=function(t){var e=[],n={};for(var r in t){var o=t[r];if("object"===P(o)){var i=e.length,a=Array.isArray(o);for(var c in e.push(r),o){var s=parseInt(c,10);if(!a||!isNaN(s)&&"".concat(s)===c){var u=void 0,d=void 0;"object"===P(o[c])?(u="".concat(i).concat(c,"+"),d=JSON.stringify(o[c])):(u="".concat(i).concat(c),d=o[c]),n[u]=d}}}else"_"===r[0]?n["-".concat(r)]=o:n[r]=o}return n.km=e.join(","),n}(c);null===(r=window.amStorefrontKit.dataCollect.collector)||void 0===r||r.pushEvent(t.type,s)}}}function J(t){var e;for(e in t)"promotion"===e?t.promotion&&(z.promotions=z.promotions||[],z.promotions.push(t.promotion)):z[e]||(z[e]=t[e])}class W{constructor(){this.listeners=[],this.listener=this.listener.bind(this)}listener(t){const e=[];for(let n of this.listeners){const[r,o]=n;r.call(this,t),o.once||e.push(n)}this.listeners=e}}class V extends EventTarget{constructor(){super(...arguments),this.finalListeners={}}addEventListener(t,e,n){if("object"==typeof n&&n.finally&&e){if("object"==typeof e&&e.handleEvent&&(e=e.handleEvent),"function"==typeof e){let r=this.finalListeners[t];return r?super.removeEventListener(t,r.listener):r=this.finalListeners[t]=new W,r.listeners.push([e,n]),super.addEventListener(t,r.listener)}return}const r=super.addEventListener(t,e,n);return this.finalListeners[t]&&(super.removeEventListener(t,this.finalListeners[t].listener),super.addEventListener(t,this.finalListeners[t].listener)),r}removeEventListener(t,e,n){return super.removeEventListener(t,e,n)}dispatchEvent(t){return super.dispatchEvent(t)}}!function(t){t.page_enter="page_enter",t.page_leave="page_leave",t.node_inserted="node_inserted",t.node_view="node_view",t.view_item="view_item",t.click_item="click_item"}(H||(H={}));class Z extends Event{constructor(t,e){super(t),this.context=e}}class tt extends V{}class et{constructor(){this.eventTarget=new tt,window.addEventListener("beforeunload",(()=>{this.eventTarget.dispatchEvent(new Z(H.page_leave,{data:null}))}))}}const nt={"2021 BlackFriday Meinekette":".site-nav.site-navigation"},rt=M()?class extends et{constructor(){var t,e,n;super(),this.isSendViewItem=!1,this.currencyCode=null===(n=null===(e=null===(t=window)||void 0===t?void 0:t.Shopify)||void 0===e?void 0:e.currency)||void 0===n?void 0:n.active,this.eventTarget=new tt,this.caches=new Map,this.queue={page_sn:"",items:[]},this.intersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),{threshold:.7}),this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),C().then((()=>{this.mutationCallback(),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}))}mutationCallback(){var t,e,n,r,o,i,a,c,s,u,d;const l=null===(n=null===(e=null===(t=null===window||void 0===window?void 0:window.amStorefrontKit)||void 0===t?void 0:t.eventData)||void 0===e?void 0:e.ecommerce_item)||void 0===n?void 0:n.byUrl;if(this.queue.page_sn=null!==(o=null===(r=D())||void 0===r?void 0:r.page_sn)&&void 0!==o?o:"",this.queue.page_sn===E.Product&&!this.isSendViewItem){this.isSendViewItem=!0;const{product:t}=null===(a=null===(i=window)||void 0===i?void 0:i.ShopifyAnalytics)||void 0===a?void 0:a.meta,{id:e,variants:n}=t,r=new URLSearchParams(location.search).get("variant"),o=r?parseInt(r,10):void 0;let c=o?n.find((t=>t.id===o)):n[0];c||(c={}),c.quantity=1;const s={item_url:window.location.href,item_name:c.name,item_id:`${e||""}`,price:O(c.price),currency_code:this.currencyCode};this.queue.items.push(s),this.debounceSendEventData()}let h=Array.from(document.querySelectorAll('a[href*="/products/"]'));const p=new RegExp(`^(${window.location.origin}${(null===(c=window.Shopify)||void 0===c?void 0:c.shop)?`|https?://${null===(s=window.Shopify)||void 0===s?void 0:s.shop}`:""}|/products|/collections)\\S+`),v=nt[null===(d=null===(u=null===window||void 0===window?void 0:window.Shopify)||void 0===u?void 0:u.theme)||void 0===d?void 0:d.name];let f=[];if(v&&(f=Array.from(document.querySelectorAll(`${v} a[href*="/products/"]`))),h=h.filter((t=>p.test(t.href)&&!this.caches.has(t.href)&&!f.some((e=>e===t)))),0!==h.length){for(let t of h)this.caches.set(t.href,!1);h.forEach((t=>{t.addEventListener("click",(t=>{const e=Object.assign({},this.queue),n=t.currentTarget.href;e.items=[Object.assign({},null==l?void 0:l[n],{item_url:n.startsWith("/")?window.location.origin+n:n,currency_code:this.currencyCode})];const r=new Z(H.click_item,{data:e});this.eventTarget.dispatchEvent(r)}))})),h.forEach((t=>{this.intersectionObserver.observe(t)}))}}intersectionCallback(t){var e,n,r;const o=null===(r=null===(n=null===(e=null===window||void 0===window?void 0:window.amStorefrontKit)||void 0===e?void 0:e.eventData)||void 0===n?void 0:n.ecommerce_item)||void 0===r?void 0:r.byUrl,i=t.filter((t=>{const e=(t.target.getAttribute("href")||"").split("#");return t.isIntersecting&&!this.caches.get(null==e?void 0:e[0])})).map((t=>{var e;return null===(e=(t.target.getAttribute("href")||"").split("#"))||void 0===e?void 0:e[0]})),a=Array.from(new Set(i)).map((t=>{const e=t.split("?")[0],n=e.replace(window.location.origin,""),r=o&&Object.keys(o).find((t=>t.includes(e)||t.includes(n)));let i=r&&(null==o?void 0:o[r]);return i&&(i.item_id&&(i.item_id=`${i.item_id||""}`),i.price&&(i.price=O(i.price)),i.compare_at_price&&(i.compare_at_price=O(i.compare_at_price))),this.caches.set(t,!0),Object.assign({},i,{currency_code:this.currencyCode,item_url:t.startsWith("/")?window.location.origin+t:t})}));a.length&&(this.queue.items.push(...a),this.debounceSendEventData())}debounceSendEventData(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{const t=new Z(H.view_item,{data:Object.assign({},this.queue)});this.eventTarget.dispatchEvent(t),this.queue.items=[]}),500)}}:et;var ot,it,at;!function(t){t[void 0]="undefined",t.cart="cart",t.add_cart="add_cart",t.checkout="checkouts.json"}(ot||(ot={})),function(t){t.XMLHttpRequest="XMLHttpRequest",t.XDomainRequest="XDomainRequest",t.fetch="fetch"}(it||(it={})),function(t){t.respond="respond",t.open="open",t.error="error"}(at||(at={}));const ct={errorEventIsReliable:!0};class st extends Event{constructor(t,e){super(t),this.context=e}}class ut extends V{}function dt(t,e,n){if("function"==typeof t[e]){const r=t[e];t[e]=function(...e){r.apply(t,e),n.apply(t,e)}}else t[e]=n}function lt(){return"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.hRequestEventTarget||(window.amStorefrontKit=window.amStorefrontKit||{},function(t){if(window.XMLHttpRequest){const e=window.XMLHttpRequest.prototype.open;"onerror"in window.XMLHttpRequest.prototype&&"onabort"in window.XMLHttpRequest.prototype&&"ontimeout"in window.XMLHttpRequest.prototype||(ct.errorEventIsReliable=!1),window.XMLHttpRequest.prototype.open=function(...n){const[r,o]=n,i={method:r,url:o,reqFn:it.XMLHttpRequest};t.dispatchEvent(new st(at.open,i));const a=()=>{if(4===this.readyState&&this.status){i.response={type:this.responseType,status:this.status};let e=!1;try{e="string"==typeof this.responseText}catch(t){}if(e)try{i.response.json=JSON.parse(this.responseText)}catch(t){i.response.text=this.responseText}t.dispatchEvent(new st(at.respond,i))}},c=e=>{i.error=new Error(`XMLHttpRequest ${e.type}`),t.dispatchEvent(new st(at.error,i))};return this.addEventListener?(this.addEventListener("readystatechange",a),this.addEventListener("abort",c),this.addEventListener("error",c),this.addEventListener("timeout",c)):(dt(this,"onreadystatechange",a),dt(this,"onabort",c),dt(this,"onerror",c),dt(this,"ontimeout",c)),e.apply(this,n)}}if(window.fetch){const e=window.fetch.bind(window);window.fetch=function(n,...r){const o=e(n,...r),i={method:"",url:"",reqFn:it.fetch};return"string"==typeof n?(i.method="GET",i.url=n):(i.method=n.method,i.url=n.url),t.dispatchEvent(new st(at.open,i)),o.then((t=>t.clone())).then((t=>(i.response={headers:t.headers,type:t.type,status:t.status},t.text()))).then((e=>{try{i.response.json=JSON.parse(e)}catch(t){i.response.text=e}t.dispatchEvent(new st(at.respond,i))})).catch((e=>{i.error=e,t.dispatchEvent(new st(at.error,i))})),o}}}(window.amStorefrontKit.hRequestEventTarget=new ut)),window.amStorefrontKit.hRequestEventTarget}var ht,pt;function vt(t){return t&&Array.isArray(t.items)}!function(t){t.cart="amStorefrontCart",t.pendingQueue="amPendingQueue"}(ht||(ht={})),function(t){t.cart_updated="cart_updated",t.checkout="checkout",t.purchase="purchase"}(pt||(pt={}));class ft extends Event{constructor(t,e){super(t),this.context=e}}class mt extends V{}var gt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))};const wt=M()?class{constructor(){this.getCartOpened=!1,this.hReqEventTarget=new ut,this.cachedCart=null,this.checkoutDomCache=[],this.eventTarget=new mt,this.initCartWatch();const t=this.hReqEventTarget=lt();t.addEventListener(at.open,(t=>{this.getRequestType(t.context.url)===ot.cart&&(this.getCartOpened=!0)})),t.addEventListener(at.respond,(t=>{var e;switch(this.getRequestType(t.context.url)){case ot.cart:this.getCartOpened=!1,this.cacheCartData(null===(e=t.context.response)||void 0===e?void 0:e.json);break;case ot.add_cart:this.getCart({fromCache:!1})}})),t.addEventListener(at.error,(t=>{this.getRequestType(t.context.url)===ot.cart&&(this.getCartOpened=!1)})),this.getCartOpened||this.getCart({fromCache:!1})}cacheCartData(t){const e=this.formatCartData(t),n=I(ht.cart);if(function(t,e){var n,r;if(!vt(t)&&!vt(e))return!1;if(!(null===(n=null==t?void 0:t.items)||void 0===n?void 0:n.length)&&!(null===(r=null==e?void 0:e.items)||void 0===r?void 0:r.length))return!1;if(!vt(t)||!vt(e)||t.items.length!==e.items.length||t.currency!==e.currency)return!0;const o=t=>t?t.items.map((t=>{const{item_list_name:e}=t,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["item_list_name"]);return Object.assign({},n)})):t;return Object.assign(t,{items:o(t)}),Object.assign(e,{items:o(e)}),JSON.stringify(t)!==JSON.stringify(e)}(n,e)){this.cachedCart=e,e?q(ht.cart,e):j(ht.cart),null==e||e.items.forEach((t=>{t.is_updated=!(null==n?void 0:n.items.some((e=>e.item_id===t.item_id&&t.item_variant_id===e.item_variant_id&&t.quantity===e.quantity)))}));const t={data:e};this.eventTarget.dispatchEvent(new ft(pt.cart_updated,t))}}getRequestType(t){return/^(\/cart\.js|\/cart\/(change|update|clear)(\.js)?)($|\?)/.test(t)?ot.cart:/^(\/cart\/add(\.js)?)($|\?)/.test(t)?ot.add_cart:/^(\/wallets\/checkouts(\.json)?)($|\?)/.test(t)?ot.checkout:ot.undefined}formatCartData(t){return vt(t)?{currency:t.currency,token:t.token,items:t.items.map(((e,n)=>{const r=this.formatItemData(e,n);return r&&Object.assign(r,{currencyCode:t.currency}),r}))}:null}formatItemData(t,e){var n,r,o,i;return(i=t)&&"number"==typeof(null==i?void 0:i.product_id)?{item_name:t.product_title||"",item_id:`${t.product_id||""}`,item_variant_id:`${t.variant_id||""}`,quantity:t.quantity,price:O(t.price),currency_code:(null===(o=null===(r=null===(n=window)||void 0===n?void 0:n.Shopify)||void 0===r?void 0:r.currency)||void 0===o?void 0:o.active)||"",item_brand:t.vendor||"",item_category:"",item_list_name:window.document.title||"",idx:void 0!==e?e+1:0,item_url:t.url}:null}getCart(t){return(null==t?void 0:t.fromCache)?Promise.resolve(I(ht.cart)):(this.getCartOpened||(e=k.cart,n={body:void 0},window.fetch(e,n)),new Promise(((t,e)=>{const n=()=>{this.hReqEventTarget.removeEventListener(at.error,r),t(this.cachedCart)},r=t=>{this.hReqEventTarget.removeEventListener(at.respond,n),e(t.context.error)};this.hReqEventTarget.addEventListener(at.respond,n,{once:!0}),this.hReqEventTarget.addEventListener(at.error,r,{once:!0})})));var e,n}initCartWatch(){return gt(this,void 0,void 0,(function*(){yield C();const t=D();(null==t?void 0:t.page_sn)===E.ThankYou&&this.thankYouCheckout(),this.buyItNowCheckout(),this.cartCheckout(),this.watchCartForm().then((()=>{this.cartCheckout()}))}))}thankYouCheckout(){var t;return gt(this,void 0,void 0,(function*(){const{customer_id:e,order_id:n,total_price:r,total_tax:o,shipping_rate:i,currency:a,discount:c,line_items:s,token:u}=(null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.checkout)||{},{price:d}=i||{},l={order_id:n,total_value:Math.round(100*r),total_tax:Math.round(100*o),total_shipping:Math.round(100*d),currency_code:a,items:[],user_id:e,token:u};if(c){const{code:t,rate:e,amount:n}=c;l.coupon={coupon_code:t,discount_rate:e,discount_amount:Math.round(100*n)}}l.items=null==s?void 0:s.map((t=>({item_name:t.title,item_id:`${t.product_id||""}`,price:Math.round(100*t.compare_at_price),pay_value:Math.round(100*t.price),item_brand:t.vendor,item_variant_id:t.variant_id,quantity:t.quantity})));const h=new ft(pt.purchase,{data:l});this.eventTarget.dispatchEvent(h)}))}dispatchCheckoutEvent(t){return gt(this,void 0,void 0,(function*(){const e=yield this.getCart({fromCache:!0});e&&this.updateQueue(pt.checkout,{data:e});const n=new ft(pt.checkout,{data:e});t&&Object.defineProperty(n,"target",{value:t,enumerable:!0}),this.eventTarget.dispatchEvent(n)}))}cartCheckout(){let t=[],e=Array.from(document.querySelectorAll('[name="checkout"][type="submit"],form[action^="/checkout"] [type="submit"]'));e=e.filter((t=>"add"!==t.getAttribute("name"))),e.length&&t.push(...e);const n=document.querySelectorAll('a[href^="/checkout"]');return n.length&&t.push(...n),t=t.filter((t=>!this.checkoutDomCache.some((e=>t===e)))),this.checkoutDomCache.push(...e),t.map((t=>{t.addEventListener("click",this.dispatchCheckoutEvent.bind(this,t),!0)})),t.length}buyItNowCheckout(){Promise.all([this.buyItNowClick(),this.buyItNowToken()]).then((([t,e])=>{t.data.token=e,this.updateQueue(pt.checkout,{data:t.data});const n=new ft(pt.checkout,{data:t.data});t.target&&Object.defineProperty(n,"target",{value:t.target,enumerable:!0}),this.eventTarget.dispatchEvent(n)}))}buyItNowToken(){return new Promise((t=>{(this.hReqEventTarget=lt()).addEventListener(at.respond,(e=>{var n,r,o,i;if(this.getRequestType(e.context.url)===ot.checkout){const a=null!==(i=null===(o=null===(r=null===(n=e.context.response)||void 0===n?void 0:n.headers)||void 0===r?void 0:r.get("location"))||void 0===o?void 0:o.replace(/\S*\/(\S*).json/,"$1"))&&void 0!==i?i:"";t(a)}}))}))}buyItNowClick(){return new Promise((t=>{const e=Array.from(document.querySelectorAll('[data-testid=Checkout-button],[data-checkout="checkout"]')).filter((t=>!this.checkoutDomCache.some((e=>e===t))));this.checkoutDomCache.push(...e),null==e||e.map((e=>{e.addEventListener("click",(()=>{var n,r;const{currency:o,product:i}=null===(r=null===(n=window)||void 0===n?void 0:n.ShopifyAnalytics)||void 0===r?void 0:r.meta,{id:a,variants:c}=i||{},s=new URLSearchParams(location.search).get("variant"),u=s?parseInt(s,10):void 0;let d=u?null==c?void 0:c.find((t=>t.id===u)):null==c?void 0:c[0];d||(d={}),d.quantity=1;const l={token:"",currency:o,items:[{item_name:d.name,item_id:`${a||""}`,price:O(d.price),currency_code:o,item_variant_id:d.id,quantity:d.quantity}]};t({data:l,target:e})}),!0)}))}))}updateQueue(t,e){const n=I(ht.pendingQueue)||[];n.push({event:t,data:e}),q(ht.pendingQueue,n)}watchCartForm(){return new Promise((t=>{const e=()=>{this.buyItNowCheckout();let t=Array.from(document.querySelectorAll("form[action^='/cart'],form[action^='/checkout']")).filter((t=>/^\/cart$|^\/cart\?\S*/.test(t.getAttribute("action")||"")||/^\/checkout$|^\/checkout\?\S*/.test(t.getAttribute("action")||"")));for(let e of t)n.observe(e)},n=new IntersectionObserver((e=>{e.some((t=>t.isIntersecting))&&t(!0)}),{threshold:.3}),r=new MutationObserver(e);e(),r.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}))}}:class{constructor(){this.eventTarget=new mt}getRequestType(t){return ot.undefined}getCart(t){return Promise.resolve({items:[]})}};function yt(t,e){if(!window.amStorefrontKit||!window.amStorefrontKit.dataCollect)throw new Error("Should call initDataCollect() first.");var n=window.amStorefrontKit.dataCollect.eventMap,r=n.get(t);r||(r={data:[],sentDataLen:-1,sentAppLen:-1},n.set(t,r)),r.data.push(Object.assign({},e))}var _t={_:"ep",event_time:"epn"},bt=function(){function t(e){var n=this;i(this,t),a(this,"maxDataQueueCount",10),a(this,"maxDataQueueSize",16e3),a(this,"flushIntervalMs",1250),a(this,"userPseudoId",void 0),a(this,"options",void 0),a(this,"maxQueryDataLength",void 0),a(this,"dataQueue",[]),a(this,"dataQueueSize",0),a(this,"reqBase",void 0),a(this,"reqProductShortCode",""),a(this,"flushing",!1),this.userPseudoId=function(){const t=function(){const t=w("_ga");let e=t.indexOf(".");if(e>-1&&(e=t.indexOf(".",e+1),e>-1)){const n=t.substring(e+1);return n.length>=12?n:""}return""}()||w(f)||S();return y(f,t,{path:g,maxAge:31536e3}),t}(),this.options=e,this.reqBase="https://www.automizely-analytics.com/analytics/collect?"+t.flattenData(this.gtmCommonData()),this.maxQueryDataLength=2048-this.reqBase.length-1,this.activeQueue(),this.flush=this.flush.bind(this),window.addEventListener("pagehide",this.flush),setTimeout((function(){window.addEventListener("beforeunload",n.flush)}))}return o(t,[{key:"activeQueue",value:function(){var t=this;setTimeout((function(){t.flush(),t.activeQueue()}),this.flushIntervalMs)}},{key:"queueAvailable",value:function(){return!!navigator.sendBeacon}},{key:"pushEvent",value:function(t,e){var n=this.gtmFlattenData(t,e);this.setProductShortCodeList(),this.queueAvailable()?(this.dataQueue.push(n),this.dataQueueSize+=n.length,(this.dataQueue.length>=this.maxDataQueueCount||this.dataQueueSize>=this.maxDataQueueSize)&&this.flush()):this.sendNow(n)}},{key:"flush",value:function(){if(!this.flushing&&0!==this.dataQueue.length){this.flushing=!0;var t=this.dataQueue;this.dataQueue=[],this.dataQueueSize=0,this.flushing=!1,this.sendBatch(t)}}},{key:"getReqUrl",value:function(){return"".concat(this.reqBase).concat(this.reqProductShortCode)}},{key:"sendNow",value:function(t){if(t.length<=this.maxQueryDataLength)new Image(1,1).src="".concat(this.getReqUrl(),"&").concat(t);else{var e=new window.XMLHttpRequest;e.withCredentials=!0,e.open("POST",this.getReqUrl()),e.send(t)}}},{key:"sendBatch",value:function(t){1===t.length&&t[0].length<=this.maxQueryDataLength?navigator.sendBeacon("".concat(this.getReqUrl(),"&").concat(t[0])):navigator.sendBeacon(this.getReqUrl(),t.join("\r\n"))}},{key:"setProductShortCodeList",value:function(){var t=[];for(var e in this.options.state)this.options.state[e].shortCode&&t.push(this.options.state[e].shortCode);t.sort(),this.maxQueryDataLength+=this.reqProductShortCode.length,this.reqProductShortCode="&_psc=".concat(t.join(",")),this.maxQueryDataLength-=this.reqProductShortCode.length}},{key:"gtmCommonData",value:function(){var e=t.getCommonData();return{v:"2",gtm:"amwcp1",sr:e.screenResolution,ul:e.language,cid:this.userPseudoId,dl:e.pageLocation,dr:e.pageReferrer,dt:e.pageTitle,sid:e.sessionId}}},{key:"gtmFlattenData",value:function(t,e){var n="en=".concat(encodeURIComponent(t));for(var r in e)n+="&".concat(_t[r]||_t._,".").concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e[r]));return n}}],[{key:"getCommonData",value:function(){var t,e;return{pageLocation:location.href,pageReferrer:document.referrer,pageTitle:document.title,screenResolution:"".concat((null===(t=window.screen)||void 0===t?void 0:t.width)||0,"x").concat((null===(e=window.screen)||void 0===e?void 0:e.height)||0),language:navigator.language||"",sessionId:L(u)}}},{key:"flattenData",value:function(t){var e="";for(var n in t)e+=(e?"&":"")+"".concat(n,"=").concat(encodeURIComponent(t[n]));return e}}]),t}();function St(t){var e;t.pageId||(t.pageId="".concat((e=new Date,e.getSeconds()+60*e.getMinutes()+3600*e.getHours()),".").concat(function(t){let e=`${x(1,9)}`;for(let t=1;t<8;t++)e+=x(0,9);return e}()))}var xt=function t(){i(this,t),a(this,"state",{}),a(this,"appEntries",{}),a(this,"eventMap",new WeakMap),a(this,"singleEvent",{})},Et=function(){function t(){i(this,t),a(this,"cartEventTarget",void 0),a(this,"viewEventTarget",void 0)}return o(t,[{key:"cart",get:function(){return this.cartEventTarget||(this.cartEventTarget=(window.amStorefrontKit=window.amStorefrontKit||{},"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.cart?window.amStorefrontKit.cart:window.amStorefrontKit.cart=new wt).eventTarget)}},{key:"view",get:function(){return this.viewEventTarget||(this.viewEventTarget=(window.amStorefrontKit=window.amStorefrontKit||{},"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.view?window.amStorefrontKit.view:window.amStorefrontKit.view=new rt).eventTarget)}}]),t}();function kt(){return{eventTarget:new Et,pushData:yt}}function Lt(){return Lt=e(s().mark((function t(e,n,r){var o,i,a,c,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.amStorefrontKit=window.amStorefrontKit||{},o=Q(),!["kadensse","bad-no"].includes(o)){t.next=6;break}return _(m,{path:g}),_(f,{path:g}),t.abrupt("return");case 6:return t.next=8,C();case 8:return i=!1,t.prev=9,t.next=12,N();case 12:i=t.sent,t.next=17;break;case 15:t.prev=15,t.t0=t.catch(9);case 17:if(i){t.next=20;break}return window.amStorefrontKit.collect=function(){},t.abrupt("return");case 20:if(window.amStorefrontKit.dataLayer=[],(a=window.amStorefrontKit.dataCollect=window.amStorefrontKit.dataCollect||new xt).state[e]={shortCode:(null==r?void 0:r.productShortCode)||""},a.collector=a.collector||new bt({gaMeasurementId:"G-S8VXCC5E20",state:a.state}),c="".concat(e,".").concat((null==r?void 0:r.entry)||""),a.appEntries=a.appEntries||{},!a.appEntries.hasOwnProperty(c)){t.next=28;break}return t.abrupt("return");case 28:a.appEntries[c]=1,St(a),Ot(),u=kt(),(null==r?void 0:r.basicData)&&J(r.basicData),(null==r?void 0:r.mappedOrgId)&&J({__organization_id:r.mappedOrgId}),a.singleEvent.pageEnter||(a.singleEvent.pageEnter=new Z(H.page_enter),Ct(u,a),Tt(u)),n&&n(u),u.eventTarget.view.addEventListener(H.page_enter,(function(t){Y(t)}),{finally:!0,once:!0}),u.eventTarget.view.dispatchEvent(a.singleEvent.pageEnter);case 38:case"end":return t.stop()}}),t,null,[[9,15]])}))),Lt.apply(this,arguments)}function Ct(t,e){t.eventTarget.view.addEventListener(H.page_leave,(function(t){Y(t)})),t.eventTarget.view.addEventListener(b.view_item,(function(t){var e,n;null!=t&&null!==(e=t.context)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.items&&yt(t,{ecommerce:{items:t.context.data.items}}),Y(t)})),t.eventTarget.view.addEventListener(b.click_item,(function(t){var e,n;null!=t&&null!==(e=t.context)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.items&&yt(t,{ecommerce:{items:t.context.data.items}}),Y(t)})),t.eventTarget.cart.addEventListener(b.checkout,(function(t){var e,n=null==t||null===(e=t.context)||void 0===e?void 0:e.data;n&&yt(t,{ecommerce:T({checkout_token:n.token,items:n.items})}),Y(t)})),t.eventTarget.cart.addEventListener(b.purchase,(function(t){var n;t&&(e.singleEvent.purchase=t);var r=null==t||null===(n=t.context)||void 0===n?void 0:n.data;r&&yt(t,{user_id:r.user_id,ecommerce:T({order_id:r.order_id,total_value:r.total_value,total_tax:r.total_tax,total_shipping:r.total_shipping,currency_code:r.currency_code,checkout_token:r.token,coupon:r.coupon,items:r.items})}),Y(t)})),t.eventTarget.cart.addEventListener(b.cart_updated,(function(t){var e,n=null==t||null===(e=t.context)||void 0===e?void 0:e.data;n&&yt(t,{ecommerce:T({cart_token:n.token,carts:n.items})}),Y(t)}))}function Tt(t){(I(ht.pendingQueue)||[]).forEach((function(e){var n=new ft(e.event,e.data);t.eventTarget.cart.dispatchEvent(n)})),j(ht.pendingQueue)}function Ot(){var t=new URLSearchParams(location.search),e=t.get("utm_source"),n=t.get("utm_medium"),r=t.get("utm_content"),o=t.get("utm_campaign"),i=t.get("_sc_p");e&&sessionStorage.setItem(d,e),n&&sessionStorage.setItem(l,n),r&&sessionStorage.setItem(h,r),o&&sessionStorage.setItem(p,o),i&&function(t){sessionStorage.setItem(v,t);var e=t.split("*").reduce((function(t,e){var n=e.split(":");return t[n[0]]=n[1],t}),{});e.lid&&y(m,e.lid,{path:g,maxAge:7884e3})}(i)}window.amStorefrontKit=window.amStorefrontKit||{},window.amStorefrontKit.collect=function(t,e){var n,r;if(null===(n=window.amStorefrontKit)||void 0===n||!n.dataCollect)throw new Error("Should call initDataCollect() first.");for(var o=0,i=Object.values(window.amStorefrontKit.dataCollect.singleEvent);o<i.length;o++){var a=i[o];if((null==a?void 0:a.type)===t){r=a;break}}var c=r||("string"==typeof t?new Event(t):t);e&&yt(c,e),Y(c)},window.amStorefrontKit.initCollect=function(t,e,n){return Lt.apply(this,arguments)}})()})();